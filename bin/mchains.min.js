!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mchains=e():t.mchains=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";const{getRandomFrom:o,getRandomFromWeightedList:n,capitalize:s}=r(1),i=function(t={},e){this.order=t.order||2,this.type=t.type||"character",this._states={},this._outputConfig={},this._defaultOutput={minLength:this.order,maxLength:2*this.order,amount:1,capitalizeFirst:!1,cropToLength:!0},e&&this.train(e)};i.prototype.train=function(t){if("object"==typeof t)if(Array.isArray(t))t.forEach(t=>{this.train(t)});else for(var e in t)t.hasOwnProperty(e)&&this.train(t[e]);else this._learnFrom(t)},i.prototype._learnFrom=function(t){"word"==this.type?this._learnFromWords(t):this._learnFromCharacters(t)},i.prototype.doesStateExist=function(t){return!!this._states.hasOwnProperty(t)},i.prototype._learnFromCharacters=function(t){for(let e=0;e<t.length-this.order+1;e++){let r=t.substring(e,e+this.order),o=void 0;e+2*this.order<=t.length&&(o=t.substring(e+this.order,e+2*this.order)),this.doesStateExist(r)?this._states[r].__count__++:(this._states[r]={neighbors:[]},this._states[r].__count__=1),o&&this._states[r].neighbors.push(o)}},i.prototype._learnFromWords=function(t){let e=(t=t.replace(new RegExp("\r?\n","g")," ")).split(" ");for(let t=0;t<e.length-this.order+1;t++){let r=e[t];for(let o=1;o<this.order;o++)r=r.concat(" "+e[t+o]);if(this.doesStateExist(r)?this._states[r].__count__++:(this._states[r]={neighbors:[]},this._states[r].__count__=1),e[t+2*this.order]){let o=e[t+this.order];for(let r=1;r<this.order;r++)o=o.concat(" "+e[t+this.order+r]);this._states[r].neighbors.push(o)}}},i.prototype.configOutput=function(t){this._outputConfig=t},i.prototype.getNgrams=function(){return this._getChainStates()},i.prototype._getChainStates=function(){return Object.keys(this._states)},i.prototype._getRandomState=function(){return n(this._states)},i.prototype._getNextState=function(t){const e=this._states[t];if(e){const t=e.neighbors;return t.length>0?o(t):void 0}},i.prototype._generateSentences=function(t){let e=[];for(;e.length<t.amount;){let r=this._getRandomState(),o=r,n=0;const s=t.minLength+Math.round((t.maxLength-t.minLength)*Math.random());t:{for(;n<s;){if(!(r=this._getNextState(r)))break t;o+=" "+r,n+=this.order}e.push(o)}}return e},i.prototype._generateWords=function(t){let e=[];for(;e.length<t.amount;){let r=this._getRandomState(),o=r;const n=t.minLength+Math.round((t.maxLength-t.minLength)*Math.random());t:{for(;o.length<n;){if(!(r=this._getNextState(r)))break t;o+=r}if(o.length>t.maxLength){if(!t.cropToLength)break t;o=o.substring(0,t.maxLength)}t.capitalizeFirst?e.push(s(o)):e.push(o)}}return e},i.prototype.generate=function(t=this._outputConfig){for(var e in this._defaultOutput)this._defaultOutput.hasOwnProperty(e)&&(t[e]=t[e]||this._defaultOutput[e]);return"word"===this.type?this._generateSentences(t):this._generateWords(t)},t.exports=i},function(t,e,r){"use strict";t.exports={getRandomFrom:t=>t[Math.floor(Math.random()*t.length)],getRandomFromWeightedList:t=>{let e=0;const r=Object.keys(t);for(let o=0;o<r.length;o++)e+=t[r[o]].__count__;let o,n=0;const s=Math.round(Math.random()*e);for(o in t)if(s<=(n+=t[o].__count__))return o},capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1)}}])});