!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mchains=e():t.mchains=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";const{getRandomFrom:n,getRandomFromWeightedList:o,capitalize:s}=r(1),i=function(t={},e){this.order=t.order||2,this.type=t.type||String,this.type===String&&(this.stringType=t.stringType||"character"),this._states={},this._outputConfig={},this._defaultOutput={minLength:this.order,maxLength:2*this.order,amount:1,capitalizeFirst:!1,cropToLength:!0},e&&this.train(e)};i.prototype.train=function(t){if("object"==typeof t)if(Array.isArray(t))t.forEach(t=>{this.train(t)});else for(var e in t)t.hasOwnProperty(e)&&this.train(t[e]);else this._learnFrom(t)},i.prototype._learnFrom=function(t){switch(this.type){case String:"word"===this.stringType?this._learnFromWords(t):this._learnFromCharacters(t);break;case Number:this._learnFromNumber(t);break;default:this._learnFromString(t)}},i.prototype.doesStateExist=function(t){return!!this._states.hasOwnProperty(t)},i.prototype._learnFromCharacters=function(t){for(let e=0;e<t.length-this.order+1;e++){let r=t.substring(e,e+this.order),n=void 0;e+2*this.order<=t.length&&(n=t.substring(e+this.order,e+2*this.order)),this.doesStateExist(r)?this._states[r].__count__++:(this._states[r]={neighbors:[]},this._states[r].__count__=1),n&&this._states[r].neighbors.push(n)}},i.prototype._learnFromWords=function(t){let e=(t=t.replace(new RegExp("\r?\n","g")," ")).split(" ");for(let t=0;t<e.length-this.order+1;t++){let r=e[t];for(let n=1;n<this.order;n++)r=r.concat(" "+e[t+n]);if(this.doesStateExist(r)?this._states[r].__count__++:(this._states[r]={neighbors:[]},this._states[r].__count__=1),e[t+2*this.order]){let n=e[t+this.order];for(let r=1;r<this.order;r++)n=n.concat(" "+e[t+this.order+r]);this._states[r].neighbors.push(n)}}},i.prototype.configOutput=function(t){this._outputConfig=t},i.prototype.getNgrams=function(){return this._getChainStates()},i.prototype._getChainStates=function(){return Object.keys(this._states)},i.prototype._getRandomState=function(){return o(this._states)},i.prototype._getNextState=function(t){const e=this._states[t];if(e){const t=e.neighbors;return t.length>0?n(t):void 0}},i.prototype._generateSentences=function(t){let e=[];for(;e.length<t.amount;){let r=this._getRandomState(),n=r,o=0;const s=t.minLength+Math.round((t.maxLength-t.minLength)*Math.random());t:{for(;o<s;){if(!(r=this._getNextState(r)))break t;n+=" "+r,o+=this.order}e.push(n)}}return e},i.prototype.generate=function(t=this._outputConfig){for(var e in this._defaultOutput)this._defaultOutput.hasOwnProperty(e)&&(t[e]=t[e]||this._defaultOutput[e]);if("word"===this.stringType)return this._generateSentences(t);let r=[];for(;r.length<t.amount;){let e=this._getRandomState(),n=e;const o=t.minLength+Math.round((t.maxLength-t.minLength)*Math.random());t:{for(;n.length<o;){if(!(e=this._getNextState(e)))break t;n+=e}if(n.length>t.maxLength){if(!t.cropToLength)break t;n=n.substring(0,t.maxLength)}t.capitalizeFirst?r.push(s(n)):r.push(n)}}return r},t.exports=i},function(t,e,r){"use strict";t.exports={getRandomFrom:t=>t[Math.floor(Math.random()*t.length)],getRandomFromWeightedList:t=>{let e=0;const r=Object.keys(t);for(let n=0;n<r.length;n++)e+=t[r[n]].__count__;let n,o=0;const s=Math.round(Math.random()*e);for(n in t)if(s<=(o+=t[n].__count__))return n},capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1)}}])});